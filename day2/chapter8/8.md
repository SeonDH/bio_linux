# 8. 텍스트 편집기 활용 (vi)

## 8.1 vi 기본 사용법

### vi 시작하고 종료 하기

- 지정된 파일을 편집한다. 파일을 지정하지 않으면 빈 파일이 열린다.

```bash
$ vi [파일]
```

- 빈 파일을 연다

```bash
$ vi
```

- 마지막 행 모드(커맨드 라인 모드) 로 이동

```
:
```

- vi 파일 종료

| 명령 키 | 기능 |
| --- | --- |
| `:q` | 저장하지 않고 종료 |
| `:q!` | 작업한 내용을 저장하지 않고 강제 종료 |
| `:w [파일명]` | 작업한 내용을 저장, 파일명을 지정하면 새 파일로 저장 |
| `:wq`, `:wq!` | 작업한 내용을 저장하고 종료 |
| `ZZ` | 작업한 내용을 저장하고 종료 |

### 입력 모드 전환 명령 키

| 명령 키 | 기능 |
| --- | --- |
| `i` | 커서 앞에 입력 |
| `a` | 커서 뒤에 입력 |
| `o` | 다음 행에 입력 |
| `I` | 행의 첫 칼럼으로 이동하여 입력 |
| `A` | 행의 마지막 칼럼으로 이동하여 입력 |
| `O` | 앞 행에 입력 |

### 커서 이동 명령 키

| 명령 키 | 기능 |
| --- | --- |
| `k` | 한 행 위로 이동 |
| `j` | 한 행 아래로 이동 |
| `l` | 한 글자 오른쪽으로 이동 |
| `h` | 한 글자 왼쪽으로 이동 |
| `^` 또는 `0` | 행의 처음으로 이동 |
| `$` | 행의 마지막으로 이동 |
| `-` | 앞 행의 처음으로 이동 |
| `+` 또는 `Enter` | 다음 행의 처음으로 이동 |
| `H` | 화면의 맨 윗 행으로 이동 |
| `M` | 화면의 중간 행으로 이동 |
| `L` | 화면의 맨 아랫 행으로 이동 |
| `w` | 다음 단어의 첫 글자로 이동 |
| `b` | 앞 단어의 첫 글자로 이동 |
| `e` | 단어의 마지막 글자로 이동 |

테스트용 텍스트 파일 생성

```bash
$ seq 1 200 | sed 's/^/line /' > practice.txt
```

### 화면 이동 명령 키

| 명령 키 | 기능 |
| --- | --- |
| `Ctrl + u` | 화면의 위쪽 절반으로 이동 |
| `Ctrl + d` | 화면의 아래쪽 절반으로 이동 |
| `Ctrl + b` | 화면의 한 페이지 위로 이동 |
| `Ctrl + f` | 화면의 한 페이지 아래로 이동 |
| `Ctrl + e` | 화면을 한 줄 아래로 스크롤 |
| `Ctrl + y` | 화면을 한 줄 위로 스크롤 |
| `zz` | 현재 행을 화면의 중앙으로 이동 |
| `zt` | 현재 행을 화면의 상단으로 이동 |
| `zb` | 현재 행을 화면의 하단으로 이동 |

- `ctrl` + `u` 를 사용할 때 u 명령어를 사용하지 않게 주의해야한다.

## 8.2 vi 고급 기능

### 행 번호 켜기

| 명령 키 | 기능 |
| --- | --- |
| `:set number`, `:se nu` | 행 번호 켜기 |
| `:set nonumber`, `:se nonu` | 행 번호 끄기 |

### 특정 행으로 바로 이동하는 명령 키

| 명령 키 | 기능 |
| --- | --- |
| `:n` | n번째 행으로 이동 (`n`은 행 번호) |
| `nG` | n번째 행으로 이동 (`n`은 행 번호) |
| `gg` | 파일의 첫 번째 행으로 이동 |
| `G` | 파일의 마지막 행으로 이동 |
| `H` | 화면의 첫 번째 행으로 이동 |
| `M` | 화면의 중간 행으로 이동 |
| `L` | 화면의 마지막 행으로 이동 |

... (이후 고급 기능 전체 본문 이어짐)

## nano 소개

[[번외] 텍스트 편집기 (nano)](extra/nano.md)

## power shell 문제

[[번외] PowerShell에서 `vi` 사용 시 단축키 충돌 문제](extra/powerShell.md)


---

# 요약

1. `vi`는 명령/입력/비주얼 모드를 기반으로 작동하며, 다양한 편집 명령어를 지원한다.
2. 커서 이동, 수정, 복사, 붙여넣기, 검색, 치환, 범위 지정 등 효율적인 편집 기능을 제공한다.
3. 텍스트 버퍼와 네임드 버퍼, 다중 창 기능 등은 고급 사용에도 매우 유용하다.
4. 익숙해질수록 손이 빠르고 강력한 편집 환경이 된다. 어렵다면 다른 편집기로 시작해도 괜찮다.



| 명령 키 | 기능 |
| --- | --- |
| `:n` | n번째 행으로 이동 (`n`은 행 번호) |
| `nG` | n번째 행으로 이동 (`n`은 행 번호) |
| `gg` | 파일의 첫 번째 행으로 이동 |
| `G` | 파일의 마지막 행으로 이동 |
| `H` | 화면의 첫 번째 행으로 이동 |
| `M` | 화면의 중간 행으로 이동 |
| `L` | 화면의 마지막 행으로 이동 |

## [실습] vi 화면 모드 변경 및 화면 이동하기

[[실습] vi 화면 모드 변경 및 화면 이동하기 - 10분](training/mod.md)

### 내용 수정 명령 키

| 명령 키 | 기능 |
| --- | --- |
| `r` | 커서 위치 글자 수정 |
| `cw`, `#cw` | 단어 수정, `#`은 수정할 단어 수 지정 |
| `s`, `#s` | 글자 수정, `#`은 수정할 글자 수 지정 |
| `cc` | 행의 모든 내용 수정 |
| `C` | 행의 끝까지 수정 |

### 내용 삭제 명령 키

| 명령 키 | 기능 |
| --- | --- |
| `x`, `#x` | 글자 삭제, `#`은 삭제할 글자 수 지정 |
| `dw`, `#dw` | 단어 삭제, `#`은 삭제할 단어 수 지정 |
| `dd`, `#dd` | 행 삭제, `#`은 삭제할 행의 수 지정 |
| `D` | 행의 끝까지 삭제 |

### 명령 취소하기

| 명령 키 | 기능 |
| --- | --- |
| `u` | 마지막 명령 취소 (undo) |
| `Ctrl + r` | 마지막 취소 명령 되돌리기 (redo) |
| `U` | 마지막으로 편집한 한 줄의 모든 변경 사항을 되돌리기 |
| `:e!` | 마지막 저장 시점 이후 내용 모두 버리기 |

### 복사, 잘라내기, 붙이기 명령 키

| 명령 키 | 기능 |
| --- | --- |
| `yy`, `#yy` | 행 복사, `#`은 복사할 행의 수 지정 |
| `p` | 행의 아래쪽에 붙여넣기 |
| `P` | 행의 윗쪽에 붙여넣기 |
| `dd`, `#dd` | 행 잘라내기, `#`은 잘라낼 행의 수 지정 |

## [실습] vi 문서 편집하기

[[실습] vi 문서 편집 - 20분](training/edit.md)

- vi 에서 버퍼라는 개념이 있어서, 내용을 삭제하거나, 복사하면 버퍼에 쌓여서 붙여넣을 수 있다.

### 네임드 버퍼 사용하기 (a-z 까지 사용 가능)

| 명령 키 | 기능 |
| --- | --- |
| `“ayy` | `a` 버퍼에 현재 행 복사 |
| `"a3yy` | `a` 버퍼에 현재부터 3행 복사 |
| `"ap` | `a` 버퍼의 내용을 현재 커서 위치 아래에 붙여넣기 |
| `"add` | `a` 버퍼에 현재 행 잘라내기 |
| `"a3dd` | `a` 버퍼에 현재부터 3행 잘라내기 |
| `"Ayy` | `a` 버퍼에 현재 행 추가로 복사 |
| `"Ap` | `a` 버퍼의 내용을 현재 커서 위치 아래에 추가 붙여넣기 |
| `"ay` | 비주얼 모드에서 선택한 텍스트를 `a` 버퍼에 복사 |
| `"ad` | 비주얼 모드에서 선택한 텍스트를 `a` 버퍼에 잘라내기 |

### 비주얼 모드 명령 키

| 명령 키 | 기능 |
| --- | --- |
| `v` | 비주얼 모드 진입 (문자 단위 선택) |
| `V` | 라인 비주얼 모드 진입 (행 단위 선택) |
| `Ctrl + v` | 블록 비주얼 모드 진입 (직사각형 선택) |
| `o` | 비주얼 모드에서 선택 영역의 반대 끝으로 이동 |
| `Esc` | 비주얼 모드 종료 |
| `d` | 선택한 텍스트 삭제 (잘라내기) |
| `y` | 선택한 텍스트 복사 |
| `c` | 선택한 텍스트 변경 |
| `>` | 선택한 텍스트 들여쓰기 |
| `<` | 선택한 텍스트 내어쓰기 |
| `u` | 선택한 텍스트 소문자로 변환 |
| `U` | 선택한 텍스트 대문자로 변환 |
| `g~` | 선택한 텍스트 대소문자 반전 |
| `=` | 선택한 텍스트 자동 정렬 |
| `r` | 비주얼 블록 모드에서 선택한 블록을 단일 문자로 대체 |
| `J` | 비주얼 모드에서 선택한 줄을 하나로 합치기 |

### 마지막 행 모드에서 범위 지정 명령 키

| 명령 키 | 기능 |
| --- | --- |
| `:n,m` | n행부터 m행까지 지정 (예: `:1,10` -> 1행부터 10행) |
| `:%` | 파일의 모든 행 지정 (`:1,$`와 동일) |
| `:.,$` | 현재 행부터 마지막 행까지 지정 |
| `:.,+n` | 현재 행부터 n행 이후까지 지정 |
| `:.,-n` | 현재 행부터 n행 이전까지 지정 |
| `:n,.` | n행부터 현재 행까지 지정 |
| `:1,` | 1행부터 현재 행까지 지정 |
| `:n,$` | n행부터 마지막 행까지 지정 |
| `:.,+3` | 현재 행부터 3행 이후까지 지정 |
| `:.,-3` | 현재 행부터 3행 이전까지 지정 |
| `:n,n+m` | n행부터 n행 이후 m행까지 지정 |

### 범위 지정 후 사용할 수 있는 명령어

| 명령어 | 기능 | 예시 |
| --- | --- | --- |
| `d` | 지정한 범위의 텍스트 삭제 | `:1,10d` -> 1행부터 10행까지 삭제 |
| `y` | 지정한 범위의 텍스트 복사 | `:1,10y` -> 1행부터 10행까지 복사 |
| `c` | 지정한 범위의 텍스트 변경 | `:1,10c` -> 1행부터 10행까지 변경 |
| `m` | 지정한 범위의 텍스트를 다른 위치로 이동 | `:1,10m 20` -> 1행부터 10행까지 20행으로 이동 |
| `t` | 지정한 범위의 텍스트를 다른 위치로 복사 | `:1,10t 20` -> 1행부터 10행까지 20행으로 복사 |
| `s` | 지정한 범위의 텍스트를 치환 | `:1,10s/foo/bar/g` -> 1행부터 10행까지 치환 |
| `>` | 지정한 범위의 텍스트 들여쓰기 | `:1,10>` -> 1행부터 10행까지 들여쓰기 |
| `<` | 지정한 범위의 텍스트 내어쓰기 | `:1,10<` -> 1행부터 10행까지 내어쓰기 |
| `w` | 지정한 범위의 텍스트를 파일로 저장 | `:1,10w filename` -> 1행부터 10행까지 파일로 저장 |
| `!` | 지정한 범위의 텍스트에 셸 명령어 실행 결과 삽입 | `:1,10!sort` -> 1행부터 10행까지 정렬 |

### 마지막 행 모드에서 복사, 잘라내기, 붙이기 명령 키

| 명령 키 | 기능 |
| --- | --- |
| `:#y` | 지정한 행 복사 |
| `:#d` | 지정한 행 잘라내기 |
| `:pu` | 현재 행 다음에 붙여넣기 |
| `:#pu` | 지정한 행 다음에 붙여넣기 |

## [실습] 범위 지정

[[실습] 범위 지정 후 편집 - 20분](training/visual.md)

### 검색 명령 키

| 명령 키 | 기능 |
| --- | --- |
| `/문자열` | 문자열을 아래 방향으로 검색 |
| `?문자열` | 문자열을 위 방향으로 검색 |
| `n` | 다음 문자열 검색 |
| `N` | 이전 문자열 검색 |

### 바꾸기 명령 키

| 명령 키 | 기능 |
| --- | --- |
| `:s/문자열1/문자열2` | 행에서 첫번째로 나오는 문자열1을 문자열2로 바꾸기 |
| `:%s/문자열1/문자열2/g` | 파일 전체에서 모든 문자열1을 문자열2로 바꾸기 |
| `<범위>s/문자열1/문자열2` | 범위 내 행의 첫번째로 나오는 문자열1을 문자열2로 바꾸기 |
| `<범위>s/문자열1/문자열2` | 범위 내 모든 문자열1을 문자열2로 바꾸기 |
| `<범위>s/문자열1/문자열2/c` | 범위 내 모든 문자열1을 문자열2로 바꿀 때 수정 여부 묻기 |

## [실습] 텍스트 대치

[[실습] 텍스트 대치 - 20분](training/replace.md)

### 파일 관련 명령 키

| 명령 키 | 기능 |
| --- | --- |
| `:r 파일명` | 지정한 파일을 현재 커서 위치에 삽입 |
| `:e 파일명` | 지정한 파일로 전환 |
| `:n` | vi 시작 시 여러 파일 지정 시 다음 파일로 이동 |

### 셸 명령 실행 명령 키

| 명령 키 | 기능 |
| --- | --- |
| `:! 셸 명령` | vi를 중단하고 셸 명령 실행(`enter` 로 다시 복귀) |
| `:sh` | vi를 빠져나가 셸 명령 실행(`exit` 명령어로 다시 vi 로 복귀) |

### 기타 명령 키

| 명령 키 | 기능 |
| --- | --- |
| `Ctrl + l` | 화면 다시 출력 |
| `Ctrl + g` | 현재 행 번호 출력 |
| `Shift + j` | 현재 행과 아랫행을 합치기 |
| `.` | 바로 직전 명령 반복 |
| `~` | 대소문자 변경 |

### 커서 위치 저장 및 복원

| 명령어 | 기능 |
| --- | --- |
| `m{a-z}` | 현재 커서 위치를 마크 `{a-z}`에 저장 (예: `ma`) |
| `'{a-z}` | 마크 `{a-z}`로 커서 이동 (행의 처음으로 이동) |
| ``{a-z}` | 마크 `{a-z}`로 커서 이동 (정확한 위치로 이동) |
| `''` | 마지막 편집 위치로 커서 이동 (행의 처음으로 이동) |
| ```` | 마지막 편집 위치로 커서 이동 (정확한 위치로 이동) |

### 다중 창 열기 명령 키

| 명령어 | 기능 |
| --- | --- |
| `:split [파일명]` | 수평 분할 창 열기 (파일명 생략 시 현재 파일 복사) |
| `:vsplit [파일명]` | 수직 분할 창 열기 (파일명 생략 시 현재 파일 복사) |
| `Ctrl-w s` | 수평 분할 창 열기 (현재 파일) |
| `Ctrl-w v` | 수직 분할 창 열기 (현재 파일) |
| `Ctrl-w w` | 다음 창으로 이동 |
| `Ctrl-w h` | 왼쪽 창으로 이동 |
| `Ctrl-w j` | 아래쪽 창으로 이동 |
| `Ctrl-w k` | 위쪽 창으로 이동 |
| `Ctrl-w l` | 오른쪽 창으로 이동 |
| `Ctrl-w q` | 현재 창 닫기 |
| `Ctrl-w o` | 다른 모든 창 닫기 (하나의 창만 남기기) |
| `Ctrl-w =` | 모든 창을 같은 크기로 조정 |

### 텍스트 복사할 때 텍스트 깨지지 않게 하는 명령어

| 명령어 | 기능 |
| --- | --- |
| `:set paste` | Paste 모드를 활성화하여 복사한 텍스트를 정확히 붙여넣기 |
| `:set nopaste` | Paste 모드를 비활성화하여 일반 편집 모드로 복귀 |

### 명령어 외우는 팁 (사실 외울 필요가 없음)

- `d` (delete) : 삭제
- `c` (change) : 치환
- `p` (paste) : 붙여넣기
- `y`(yank) : 복사
- `u` (undo)
- **`i`** (insert)
- `a` (append)
- `o` (open)
- `H` (high)
- `M` (middle)
- `L` (low)

***vi 에디터는 리눅스에서 텍스트를 편집하기 위해 일반적으로 사용되는 텍스트 편집기(메모장)일 뿐이며,  어려울 경우 다른 대안들이 있기 때문에 실무에서 사용하면서 천천히 익혀도 무리가 없다.***

## nano 소개

[[번외] 텍스트 편집기 (nano)](extra/nano.md)

---

# 요약

1. vi 는 많은 기능을 가지고 있다.

[[번외] Visual Studio Code](extra/vscode.md)