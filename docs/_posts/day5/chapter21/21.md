# 21. 터미널 멀티플렉서: screen & tmux

## 개요

* 리눅스에서 터미널을 여러 개 동시에 다룰 수 있게 해주는 도구
* 하나의 SSH 세션 내에서 다수의 창 생성, 분리(detach), 재접속이 가능
* 네트워크 연결이 끊겨도 세션이 유지되므로 원격 작업 시 유용함

---

## screen 사용법

### 설정 파일 생성

```bash
vi ~/.screenrc
```

예시 설정:

```
hardstatus alwayslastline
hardstatus string '%{= kG}[%H] %{= kw}%-Lw%{= kW}%n*%f %t%{= kw}%+Lw %= %Y-%m-%d %c'
shell -$SHELL
screen -t main
caption always
caption string '%{= kw}Window: %n %t'
```

### 주요 명령어

| 기능       | 명령어                                |             |
| -------- | ---------------------------------- | ----------- |
| 새 세션 시작  | `screen`                           |             |
| 이름 지정 시작 | `screen -S mysession`              |             |
| 세션 분리    | `Ctrl + a`, `d`                    |             |
| 세션 목록    | `screen -ls`                       |             |
| 세션 재접속   | `screen -r [name]`                 |             |
| 새 창 생성   | `Ctrl + a`, `c`                    |             |
| 창 전환     | `Ctrl + a`, `n` (다음), `p` (이전)     |             |
| 창 이름 변경  | `Ctrl + a`, `A`                    |             |
| 창 목록 보기  | `Ctrl + a`, `"`                    |             |
| 창 이동     | `Ctrl + a`, `<숫자>`                 |             |
| 화면 분할    | `Ctrl + a`, `S` (수평), \`           | `또는`\` (수직) |
| 화면 전환    | `Ctrl + a`, `Tab`                  |             |
| 화면 제거    | `Ctrl + a`, `X`                    |             |
| 세션 종료    | `exit` 또는 `screen -S name -X quit` |             |

---

## tmux 사용법

### 설정 파일 생성

```bash
vi ~/.tmux.conf
```

예시 설정:

```
set -g status-bg colour235
set -g status-fg white
set -g status-left '[#S]'
set -g status-right '[%Y-%m-%d %H:%M:%S]'
setw -g monitor-activity on
set -g visual-activity on
# set -g mouse on
```

### 주요 명령어

| 기능       | 명령어                                              |
| -------- | ------------------------------------------------ |
| 새 세션 시작  | `tmux`                                           |
| 이름 지정 시작 | `tmux new-session -s mysession`                  |
| 세션 분리    | `Ctrl + b`, `d`                                  |
| 세션 목록    | `tmux list-sessions`                             |
| 세션 재접속   | `tmux attach -t mysession`                       |
| 새 창 생성   | `Ctrl + b`, `c`                                  |
| 창 전환     | `Ctrl + b`, `n`, `p`                             |
| 창 이름 변경  | `Ctrl + b`, `,`                                  |
| 창 목록     | `Ctrl + b`, `w`                                  |
| 창 이동     | `Ctrl + b`, `<숫자>`                               |
| 스크롤 모드   | `Ctrl + b`, `[` (Esc로 종료, vi 키 지원)               |
| 화면 분할    | `Ctrl + b`, `"` (수평), `%` (수직)                   |
| 화면 전환    | `Ctrl + b`, `화살표`                                |
| 화면 제거    | `Ctrl + b`, `x`                                  |
| 동기화 모드   | `Ctrl + b`, `:setw synchronize-panes on` / `off` |

---

## 비교 요약

| 항목      | screen | tmux   |
| ------- | ------ | ------ |
| 개발 연도   | 오래됨    | 비교적 최신 |
| 유지보수    | 정체 상태  | 활발함    |
| 창 분할 기능 | 제한적    | 강력함    |
| 마우스 지원  | 제한적    | 있음     |
| 설정 유연성  | 낮음     | 높음     |

---

## \[실습] 터미널 분리 및 재접속

1. `tmux` 또는 `screen` 설치 확인
2. 세션 생성 후 명령어 입력
3. `Ctrl + b`, `d` (tmux) 또는 `Ctrl + a`, `d` (screen)로 분리
4. 재접속 후 작업 재개
